<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Control de Eventos QR</title>

  <script src="https://unpkg.com/html5-qrcode"></script>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    // Import the functions you need from the SDKs you need
import { initializeApp } from "firebase/app";
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
const firebaseConfig = {
  apiKey: "AIzaSyA3xhATSu5AfSTGVrAvC1Y8I9m0BqK4GZM",
  authDomain: "control-eventos-qr.firebaseapp.com",
  projectId: "control-eventos-qr",
  storageBucket: "control-eventos-qr.firebasestorage.app",
  messagingSenderId: "358678513736",
  appId: "1:358678513736:web:0680b5baaec937211c707d"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    window.onload = () => {
      const qr = new Html5Qrcode("reader");
      qr.start(
        { facingMode: "environment" },
        { fps: 10, qrbox: 250 },
        async (text) => {
          const datos = text.split("|");
          await addDoc(collection(db, "registros"), {
            nombre: datos[0],
            matricula: datos[1],
            evento: "Evento de prueba",
            hora: new Date()
          });
          alert("Registro guardado");
        }
      );
    };
  </script>
</head>

<body>
  <h2>Escanear QR</h2>
  <div id="reader" style="width:300px"></div>
</body>
</html>
